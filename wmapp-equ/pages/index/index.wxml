<!-- import zanui -->
<import src="../../zanui/loadmore/index.wxml" />
<import src="../../zanui/video/index.wxml" />
<!--index.wxml-->
<view class="container-nopadding">
  <loading hidden="{{loading_hidden}}">
    {{loading_msg}}
  </loading>
  <authorization showAuthorization="{{showAuthorization}}" bindagreeAuthorizeFun="agreeAuthorizeFun" bindrejectAuthorizeFun="rejectAuthorizeFun"></authorization>
  <!--  引入自定义组价。'navbar-data'中navbar是自定义名字，决定了组件中'navbarData'的名字 -->
  <navBar navbar-data='{{navbarData}}'></navBar>
  <view style="height: {{heightMt}}px"></view>
  <view class="page-body">


    <scroll-view scroll-x="true" class="tab-h" style="top: {{heightMt}}px" scroll-left="{{scrollLeft}}">
      <view class="tab-item {{currentTab== 0?'active':''}}" data-current="0" bindtap="swichNav">兴趣</view>
      <view class="tab-item {{currentTab== 1?'active':''}}" data-current="1" bindtap="swichNav">最新</view>
      <view class="tab-item {{currentTab== 2?'active':''}}" data-current="2" bindtap="swichNav">视频</view>
      <view class="tab-item {{currentTab== 3?'active':''}}" data-current="3" bindtap="swichNav">E讯</view>
    </scroll-view>

    <swiper class="tab-content" current="{{currentTab}}" duration="300" bindchange="switchTab" style="height:{{winHeight - heightMt - 40}}px">

      <swiper-item>
        <scroll-view scroll-y="true" bindscroll="scrollFn" class="scoll-h" scroll-top="{{scrollTop}}" bindscrolltolower="reachInterestBottom" bindscroll="bindscroll">
          <view class="container-list" wx:for="{{interest_data}}" wx:for-item="item" wx:key="{{index}}">
            <view class="user-info">
              <view class="avatar">
                <image class="img" src="{{item.avatar}}"></image>
              </view>
              <text>{{item.author}}</text>
            </view>
            <view class="">
              <view class="image-list" wx:if="{{item.image_list.length>0}}">
                <image src="{{img}}" mode="aspectFill" wx:for="{{item.image_list}}" wx:for-item="img" wx:key="{{index}}">
                  <view class="video-icon" wx:if="{{item.attachment == 1}}"></view>
                </image>
              </view>
              <view class="subject">{{item.subject}}
              </view>
              <view class="footer">
                <view class="time">{{item.time}}</view>
                <view class="view-reply">
                  <view class="views">
                    <image src="../../resources/image/common/views.png"></image>
                    {{item.views}}
                  </view>
                  <view class="replies">
                    <image src="../../resources/image/common/replies.png"></image>
                    {{item.replies}}
                  </view>
                  <view class="shares">
                    <image src="../../resources/image/common/shares.png"></image>
                  </view>
                </view>
              </view>
            </view>
          </view>

          <!-- 加载更多 -->
          <template is="zan-loadmore" data="{{loading: interest_have_data}}"></template>
          <!-- 没有更多的数据了 -->
          <template is="zan-loadmore" data="{{nomore: interest_nomore_data}}"></template>


        </scroll-view>
      </swiper-item>

      <!-- 最新 -->
      <swiper-item>
        <scroll-view scroll-y="true" bindscroll="scrollFn" class="scoll-h" scroll-top="{{scrollTop}}" bindscrolltolower="reachNewBottom" bindscroll="bindscroll">
          <view class="container-list" wx:for="{{thread_data}}" wx:for-item="item" wx:key="{{index}}">
            <view class="user-info">
              <view class="avatar">
                <image class="img" src="{{item.avatar}}"></image>
              </view>
              <text>{{item.author}}</text>
            </view>
            <view>
              <view class="image-list" wx:if="{{item.attachment == 1}}">
                <video src="{{item.video}}" id="myVideo{{item.pid + index}}" data-pid="{{item.pid + index}}" hover-stop-propagation="{{true}}" poster="{{item.video}}" bindended="exitFullScreen" wx:if="{{showCoverId == item.pid + index}}" direction="0" wx:if="{{showCoverId == item.pid + index }}"></video>
                <image src="{{item.image_list[0]}}" mode="aspectFill" data-pid="{{item.pid + index}}" catchtap="play" hover-stop-propagation="{{true}}" wx:else>
                  <view class="video-icon" data-pid="{{item.pid + index }}" catchtap="play" hover-stop-propagation="{{true}}"></view>
                </image>
              </view>

              <view class="image-list" wx:if="{{item.attachment != 1 && item.image_list.length == 1}}">
                <image src="{{item.image_list[0]}}" mode="aspectFill" >
                </image>
              </view>
              <view class="subject">{{item.subject}}
              </view>
              <view class="footer">
                <view class="time">{{item.time}}</view>
                <view class="view-reply">
                  <view class="views">
                    <image src="../../resources/image/common/views.png"></image>
                    {{item.views}}
                  </view>
                  <view class="replies">
                    <image src="../../resources/image/common/replies.png"></image>
                    {{item.replies}}
                  </view>
                  <view class="shares">
                    <image src="../../resources/image/common/shares.png"></image>
                  </view>
                </view>
              </view>
            </view>
          </view>

          <!-- 加载更多 -->
          <template is="zan-loadmore" data="{{loading: new_have_data}}"></template>
          <!-- 没有更多的数据了 -->
          <template is="zan-loadmore" data="{{nomore: new_nomore_data}}"></template>

        </scroll-view>
      </swiper-item>

      <!-- 视频 -->
      <swiper-item>
        <scroll-view scroll-y="true" bindscroll="scrollFn" class="scoll-h" scroll-top="{{scrollTop}}" bindscrolltolower="reachVideoBottom" bindscroll="bindscroll">
          <view class="container-list" wx:for="{{video_data}}" wx:for-item="item" wx:key="{{index}}">
            <view class="user-info">
              <view class="avatar">
                <image class="img" src="{{item.avatar}}"></image>
              </view>
              <text>{{item.author}}</text>
            </view>
            <view>
              <view class="image-list" wx:if="{{item.attachment == 1}}">
                <video src="{{item.video}}" id="myVideo{{item.pid + index}}" data-pid="{{item.pid + index}}" hover-stop-propagation="{{true}}" poster="{{item.video}}" bindended="exitFullScreen" wx:if="{{showCoverId == item.pid + index}}" direction="0" wx:if="{{showCoverId == item.pid + index}}"></video>
                <image src="{{item.image_list[0]}}" mode="aspectFill" data-pid="{{item.pid + index}}" catchtap="play" hover-stop-propagation="{{true}}" wx:else>
                  <view class="video-icon" data-pid="{{item.pid + index}}" catchtap="play" hover-stop-propagation="{{true}}"></view>
                </image>
              </view>

              <view class="subject">{{item.subject}}
              </view>
              <view class="footer">
                <view class="time">{{item.time}}</view>
                <view class="view-reply">
                  <view class="views">
                    <image src="../../resources/image/common/views.png"></image>
                    {{item.views}}
                  </view>
                  <view class="replies">
                    <image src="../../resources/image/common/replies.png"></image>
                    {{item.replies}}
                  </view>
                  <view class="shares">
                    <image src="../../resources/image/common/shares.png"></image>
                  </view>
                </view>
              </view>
            </view>
          </view>

          <!-- 加载更多 -->
          <template is="zan-loadmore" data="{{loading: video_have_data}}"></template>
          <!-- 没有更多的数据了 -->
          <template is="zan-loadmore" data="{{nomore: video_nomore_data}}"></template>

        </scroll-view>
      </swiper-item>

      <!-- reachExunBottom -->
      <swiper-item>
        <scroll-view scroll-y="true" bindscroll="scrollFn" class="scoll-h" scroll-top="{{scrollTop}}" bindscrolltolower="reachExunBottom" bindscroll="bindscroll">
          <view class="container-list" wx:for="{{exun_data}}" wx:for-item="item" wx:key="{{index}}">
            <view class="user-info">
              <view class="avatar">
                <image class="img" src="{{item.avatar}}"></image>
              </view>
              <text>{{item.author}}</text>
            </view>
            <view class="">
              <view class="image-list" wx:if="{{item.image_list.length>0}}">
                <image src="{{img}}" mode="aspectFill" wx:for="{{item.image_list}}" wx:for-item="img" wx:key="{{index}}">
                  <view class="video-icon" wx:if="{{item.attachment == 1}}"></view>
                </image>
              </view>
              <view class="subject">{{item.subject}}
              </view>
              <view class="footer">
                <view class="time">{{item.time}}</view>
                <view class="view-reply">
                  <view class="views">
                    <image src="../../resources/image/common/views.png"></image>
                    {{item.views}}
                  </view>
                  <view class="replies">
                    <image src="../../resources/image/common/replies.png"></image>
                    {{item.replies}}
                  </view>
                  <view class="shares">
                    <image src="../../resources/image/common/shares.png"></image>
                  </view>
                </view>
              </view>
            </view>
          </view>

          <!-- 加载更多 -->
          <template is="zan-loadmore" data="{{loading: exun_have_data}}"></template>
          <!-- 没有更多的数据了 -->
          <template is="zan-loadmore" data="{{nomore: exun_nomore_data}}"></template>


        </scroll-view>
      </swiper-item>

    </swiper>

    <!-- <view class="section-title section-ext">
            <text class="title">最新帖子</text>
            <view class="navigator-arrow" bindtap="moreForum"></view>
          </view> -->
    <!-- <view class="section">
      <movable-area class="area">
        <movable-view wx:for="{{imgRecommends}}" wx:key="{{item.tid}}" x="{{item.x}}" y="{{item.y}}" damping="40" direction="all" bindchange="onChange" out-of-bounds="true" data-index="{{item.idx}}" catch:touchend="tap">
          <image animation="{{animationData}}" src="{{item.thumbpath}}" class="image image{{item.idx}}"></image>
        </movable-view>
      </movable-area>
    </view> -->

    <!-- 加载更多 -->
    <template is="zan-loadmore" data="{{ loading: have_data}}"></template>
    <!-- 没有更多的数据了 -->
    <template is="zan-loadmore" data="{{ nomore :nomore_data}}"></template>
    <!-- 返回顶部 -->

  </view>
</view>